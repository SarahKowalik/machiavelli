{"name":"Machiavelli","tagline":"Graphing and data visualization tool","body":"Machiavelli\r\n=========\r\n\r\n[![Build\r\nStatus](https://travis-ci.org/anchor/machiavelli.png?branch=travis)](https://travis-ci.org/anchor/machiavelli)\r\n\r\n\r\nMachiavelli is a Ruby on Rails application for taking any arbitrarily defined data source, and feeding it into any arbitrarily defined graphing library.\r\n\r\nIt does this by defining a set of data sources, or \"backends\", and a set of charting libraries, or \"graphs\".\r\n\r\n#### Backends\r\nA backend is a flatfile or json feed from a website. For Machiavelli to work it's magic, it needs to know two things about any particular backend:\r\n * How to get a list of available metrics, and \r\n * How to get a data set for a particular metric\r\n\r\nMachiavelli currently has modules supporting the following backend types:\r\n * Graphite\r\n * A \"simple\" json feed (dummy sinatra application, see Installation)\r\n * flat files, e.g. comma delimited datapoints.\r\n\r\n### Graphs\r\nOnce a metric source has been obtained, it can be fed to a graph. This is done by a series of ruby classes, views and javascript files in order to manipulate and display the data. These can be toggled on the fly in the user interface, as required.\r\n\r\nMachiavelli current includes these graphing libraries:\r\n * Cubism (for horizon charts)\r\n * Rickshaw (for standard, and stacked charts).\r\n\r\nSee the Dependencies second of this file for more information about these libraries.\r\n\r\nInstallation\r\n--\r\n\r\nEnsure Ruby 1.9.3 or higher, and Redis are installed locally. Then, clone and execute like any standard Ruby on Rails application:\r\n\r\n```sh\r\ngit clone <repo>\r\nbundle install\r\nbundle exec rails server\r\n```\r\n\r\n### Testing Data source\r\n\r\nThe default configuration settings include a simple data source, a itty bitty Sinatra application that can be run along side a default installation of Machiavelli to demo the application. Run this by executing:\r\n```sh\r\ngem install sinatra # only required once\r\nruby simple_endpoint.rb\r\n```\r\nThen, just navigate to `http://localhost:3000` in your favourite browser, and you're on your way.\r\n\r\nFor testing flatfiles, run `generate_flatfile.rb` and reference the file in `public/flatfile.csv`\r\n\r\nUsage\r\n--\r\n\r\nAfter loading the Machiavelli page for the first time, no metrics are available to display. Clicking the \"Refresh\" button on the left hand side navigation menu near the -- currently-empty -- Available Metrics listing, iterates over all the configuration settings and pulls all available metrics to be graphed into the left hand side bar.\r\n\r\nThen, any metric can be added or removed from the page by clicking its link. Active metrics can be rearranged by dragging their listing to reorder.\r\n\r\nThe filter bar can be used to narrow down the list of available metrics (those that aren't already graphed) for ease of selection. Entering a substring matching multiple metrics and pressing enter will add all matches to the page.\r\n\r\nThe buttons on the top navigation bar can be used to toggle the date range, and graphing style to use. Depending on the view being used, hovering can show more detail, and sliders can be used to zoom to specific points in time.\r\n\r\nClicking 'Refresh' in the top navigation bar will refresh the page, and thus the metric data being displayed\r\n\r\nThe Play/Stop button can be used to stop the live updating of metrics. Clicking the Play button refreshes the page, and the live updating starts again. \r\n\r\n**Please note** - live metric updating requires that your local time be up to date with the Machiavelli server time. Should any errors relating to lack of live updating data occur, please confirm the ntp services on your local machine and the hosted Machiavelli environment\r\n\r\n\r\nInvoking Backends\r\n--\r\n\r\nAdding a backend to a Machiavelli instance is as simple as adding it to the `backends` stanza in `config/settings.yml`.\r\n\r\nBy default, every backend requires:\r\n * `type` \r\n- the name of the library in `lib/backend/` to be invoked\r\n * `settings` \r\n- a hash of settings to pass to the library. See each library for details.\r\n\r\nMultiple backends of the same type can be invoked at once by adding an `alias` setting. The backend type, or alias, will appear in the metrics listing in Machiavelli.\r\n\r\nCreating New Backends\r\n--\r\n\r\nNew backends can be defined by copying the simple backend as a template. In addition, the `generic_backend.rb` describes the `get_metrics_list` and `get_metrcs` functions, which are overloaded in child classes. Overload these in your child library to implement. \r\n\r\n\r\nOptional Settings\r\n--\r\n\r\nMachiavelli will accept any `config/settings.yml` overwrites of the following values:\r\n\r\n`tooltips`\r\n- default `off`.\r\n- Set to true for tooltips for the basic user interface\r\n\r\n`horizon_color`\r\n -  default `#006d2c` (\"Cubism\" green).\r\n - Set a base colour for the darkest horizon colouring.\r\n\r\n`redis_host`,` redis_port`\r\n -  default `127.0.0.1`, `6379` \r\n - Set an alternative redis server for metrics caching.\r\n\r\n`metrics_key`\r\n -  default `Machiavelli.Backend.Metrics` \r\n - Set a base key for metric name caching in Redis.\r\n\r\n\r\nDependencies\r\n--\r\n\r\nMachiavelli makes use of the following projects and code libraries under their associated licences:\r\n\r\n * [Rickshaw](https://github.com/shutterstock/rickshaw), available under the MIT Licence.\r\n  - we use a slightly patched version, availble [here](https://github.com/glasnt/rickshaw)\r\n * [Cubism](https://github.com/square/cubism), available under the Apache 2.0 Licence.\r\n  - we use a slighly patched version, available [here](https://github.com/glasnt/cubism)\r\n * [D3](https://github.com/mbostock/d3), available under the BSD3 Licence.\r\n  - we use a slighly patched version, avaiable [here](https://github.com/glasnt/d3)\r\n * [Bootstrap](https://github.com/twbs/bootstrap/), available under the MIT Licence.\r\n * [jQuery](https://github.com/jquery/jquery), available under the MIT Licence.\r\n * [Underscore](https://github.com/jashkenas/underscore), available under the MIT Licence.\r\n * [Font Awesome](https://github.com/FortAwesome/Font-Awesome/), by Dave Gandy - http://fontawesome.io\r\n * [SBAdmin2 Theme](https://github.com/IronSummitMedia/startbootstrap/tree/master/templates/sb-admin-v2), available under the Apache 2.0 Licence.\r\n\r\nMachiavelli is written in [Ruby on Rails](https://github.com/rails/rails), licensed under the MIT Licence.\r\n\r\nLicence\r\n--\r\n\r\nMachiavelli is available under a BSD3 licence, see [LICENCE](LICENCE) for more information.\r\n\r\nFor dependent libraries, see the Dependencies section of this file.\r\n\r\n[Graphite](https://github.com/graphite-project/) is available under the Apache 2.0 Licence.\r\n\r\n[Redis](https://github.com/antirez/redis) is available under a BSD3 Licence.\r\n\r\n\r\n\r\n-------------\r\n\r\n\r\n> Before all else, be graphed\r\n- Machiavelli (apocryphal)\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}